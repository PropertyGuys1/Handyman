@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Handyman.Data.Entities
@model List<Service>

@{
    ViewData["Title"] = "Home Page";
}
<style>
    .unified-image {
        width: 100%;
        height: 20rem; 
        object-fit: cover;
        border-radius: 10px;
        display: block;
        margin-left: auto;
        margin-right: auto;
        transition: transform 0.3s ease;
    }

     .unified-image:hover {
            transform: scale(1.1); 
        }
</style>


<div class="jumbotron jumbotron-fluid bg-opacity-75 bg-black text-center py-5 mb-5" style="width: 100%; margin: 0;">
    <div class="text-white">
        <h1 class="display-4">Welcome to Our Service Platform</h1>
        <p class="lead">Your one-stop solution for all your service needs. Connect with skilled professionals to get tasks done efficiently and reliably.</p>
        <a class="btn btn-primary btn-lg mt-3" href="#services" role="button">Explore Services</a>
    </div>
</div>

<!-- Search Section -->
<div class="container py-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h2 class="text-center mb-4">Find a Service</h2>

            <form method="get" action="/Home" class="input-group mb-3">
                <input type="text" class="form-control" id="searchBox" placeholder="Search for a service..." autocomplete="off">
            </form>

            <!-- Suggestions Dropdown -->
            <ul id="suggestions" class="list-group mt-2 position-absolute w-50"></ul>
        </div>
    </div>
    <!-- Chatbot. Dunno where to put it exactly -->
    @await Html.PartialAsync("_Chatbot")
</div>

<!-- Service Categories Section -->
<div class="container py-5 mb-5" id="services">
    <div class="row text-center mb-4">
        <div class="col-md-12">
            <h2>Our Services</h2>
            <p>Explore our range of professional services tailored to your needs.</p>
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 74 })">
                    <img src="~/images/serviceTypeImages/CleaningServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Cleaning</h5>
                    <p class="card-text">Professional cleaning services for your home or office.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 81 })">
                    <img src="~/images/serviceTypeImages/ShoppingDeliveryServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Delivery</h5>
                    <p class="card-text">Fast and reliable delivery services for your items.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 42 })">
                    <img src="~/images/serviceTypeImages/MovingServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Moving</h5>
                    <p class="card-text">Efficient moving services to help you relocate.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 7 })">
                    <img src="~/images/serviceTypeImages/HandyManServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Handyman</h5>
                    <p class="card-text">Skilled handyman services for all your repair needs.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 26 })">
                    <img src="~/images/serviceImages/TVMountingServices.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Mounting</h5>
                    <p class="card-text">Professional mounting services for TVs and more.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 87 })">
                    <img src="~/images/serviceTypeImages/ContactlessServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Contactless</h5>
                    <p class="card-text">Furniture assembly with little to no contact.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 1 })">
                    <img src="~/images/serviceImages/LawnServices.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a> 
                <link />
                <div class="card-body">
                    <h5 class="card-title">Yard Work</h5>
                    <p class="card-text">Mowing your lawn or trimming your hedges or trees.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 66 })">
                    <img src="~/images/serviceTypeImages/WinterTasks.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Winter Tasks</h5>
                    <p class="card-text">Provide great snow blowing assistance.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 51 })">
                    <img src="~/images/serviceTypeImages/HolidayHelpServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Holiday Help</h5>
                    <p class="card-text">Help put up a tree, gift wrapping or shopping.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 37 })">
                    <img src="~/images/serviceImages/SmartHomeServices.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Smart Home Services</h5>
                    <p class="card-text">Help install security system or other smart home devices.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
                <link>
                <a href="@Url.Action("servicedetails", "Home", new { id = 97 })">
                    <img src="~/images/serviceTypeImages/MountingInstallationServiceType.jpg" class="card-img-top  unified-image" alt="Service Image" />
                </a>
                <link />
                <div class="card-body">
                    <h5 class="card-title">Installation</h5>
                    <p class="card-text">Installing potlights or other products through out the house.</p>
                </div>
            </div>
        </div>
         <div class="col-md-4">
            <div class="card mb-4 shadow-lg">
            <link>
            <a href="@Url.Action("servicedetails", "Home", new { id = 29 })">
                <img src="~/images/serviceImages/PlumbingServices.jpg" class="card-img-top  unified-image" alt="Service Image" />
            </a>
            <link />
                <div class="card-body">
                    <h5 class="card-title">Plumbing</h5>
                    <p class="card-text">Fast and Efficient Plumbing to get up and running in no time.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- How It Works Section -->
<div class="container py-5 mb-5">
    <div class="row text-center mb-4">
        <div class="col-md-12">
            <h2>How It Works</h2>
            <p>Follow these simple steps to get your tasks done.</p>
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Step 1: Login</h5>
                    <p class="card-text">Sign in to your account to get started.</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Step 2: Create Your Profile</h5>
                    <p class="card-text">Set up your profile with your details.</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Step 3: Add Address</h5>
                    <p class="card-text">Enter your address for service location.</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Step 4: Search for Services</h5>
                    <p class="card-text">Find the service you need.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Step 5: Book Your Appointment</h5>
                    <p class="card-text">Schedule your appointment with the service provider.</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#searchBox").on("keyup", function () {
                let query = $(this).val().trim();
                if (query.length === 0) {
                    $("#suggestions").empty();
                    return;
                }

                $.ajax({
                    url: "/Home/GetServices",
                    type: "GET",
                    data: { query: query },
                    success: function (data) {
                        $("#suggestions").empty();
                        if (data.length > 0) {
                            data.forEach(function (service) {
                                $("#suggestions").append(
                                    `<li class="list-group-item">
                                        <a href="/Home/ServiceDetails?id=${encodeURIComponent(service.id)}" 
                                           class="text-success text-decoration-none">
                                            ${service.name}
                                        </a>
                                    </li>`
                                );
                            });
                        } else {
                            $("#suggestions").append(`<li class="list-group-item text-muted">No services found</li>`);
                        }
                    }
                });
            });

            // Hide suggestions when clicking outside
            $(document).on("click", function (event) {
                if (!$(event.target).closest("#searchBox, #suggestions").length) {
                    $("#suggestions").empty();
                }
            });
        });
    </script>
}