@*
$1$
@model Handyman.Data.Entities.UserProfileViewModel


<div class="container py-5">
    <div class="card shadow-lg p-4">
        <div class="row">
            <!-- Left: Profile Info -->
            <div class="col-md-4 text-center">
                <div class="mb-3">
                    @if (Model.Profile.Id > 0)
                    {
                        <img src="@Url.Action("GetProfileImage", "User", new { id = Model.Profile.Id })" alt="Profile Image" class="img-thumbnail" width="150" height="150" />
                    }
                    else
                    {
                        <img src="~/images/defaultpic.jpg" alt="Profile Image" class="img-thumbnail" width="150" height="150" />
                    }
                    
                </div>
                <h4>@Model.Profile.FullName</h4>
                <p class="text-muted">@Model.Profile.Email</p>
                <p><strong>Role:</strong> @Model.Profile.Role</p>
                <p><strong>Phone:</strong> @Model.Profile.PhoneNumber</p>
                <p><strong>Address:</strong> @Model.Address</p>
                
                
                <!-- Edit Button -->
                <a class="btn btn-warning" asp-action="EditProfile" asp-controller="User" asp-route-Id="@Model.Profile.UserId">Edit</a>
                
                <!-- Delete Button -->
                <form asp-controller="User" asp-action="DeleteProfile" asp-route-id="@Model.Profile.UserId" method="post" class="mt-3">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete your profile?')">Delete Profile</button>
                </form>
            </div>

            <!-- Right: Detailed Info -->
            <div class="col-md-8">
                <h4 class="mb-3">User Details</h4>
                <ul class="list-group mb-3">
                    <li class="list-group-item"><strong>Preferences:</strong> @Model.CustomerProfile?.Preferences</li>
                    <li class="list-group-item"><strong>Created On:</strong> @Model.Profile.CreatedAt.ToShortDateString()</li>
                    <li class="list-group-item"><strong>Last Updated:</strong> @Model.Profile.UpdatedAt.ToShortDateString()</li>
                </ul>

                <!-- Feedback Section -->
                <h4 class="mb-3">Feedback</h4>
                @if (Model.Feedbacks?.Any() ?? false)
                {
                    <ul class="list-group">
                        @foreach (var feedback in Model.Feedbacks)
                        {
                            <li class="list-group-item">
                                <strong>@feedback.Rating/5</strong> - @feedback.Feedback
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No feedback available.</p>
                }

                <!-- Payments Section -->
                <h4 class="mb-3">Payment History</h4>
                @if (Model.Payments?.Any() ?? false)
                {
                    <ul class="list-group">
                        @foreach (var payment in Model.Payments)
                        {
                            <li class="list-group-item">
                                <strong>@payment.Amount.ToString("C")</strong> - @payment.PaymentDate.ToShortDateString()
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No payment records found.</p>
                }
            </div>
        </div>
    </div>
</div>
#1#

@model Handyman.Data.Entities.UserProfileViewModel

<div class="container py-5">
    <div class="card shadow-lg p-4">
        <div class="row">
            <!-- Left: Profile Info -->
            <div class="col-md-4 text-center">
                <div class="mb-3">
                    @if (Model.Profile.Id > 0)
                    {
                        <img src="@Url.Action("GetProfileImage", "User", new { id = Model.Profile.Id })" alt="Profile Image" class="img-thumbnail" width="150" height="150" />
                    }
                    else
                    {
                        <img src="~/images/defaultpic.jpg" alt="Profile Image" class="img-thumbnail" width="150" height="150" />
                    }
                </div>
                <h4>@Model.Profile.FullName</h4>
                <p class="text-muted">@Model.Profile.Email</p>
                <p><strong>Role:</strong> @Model.Profile.Role</p>
                <p><strong>Phone:</strong> @Model.Profile.PhoneNumber</p>

                <!-- Addresses Section -->
                <h4 class="mb-3">Addresses</h4>
                @if (Model.Addresses != null && Model.Addresses.Any())
                {
                    <ul class="list-group mb-3">
                        @foreach (var address in Model.Addresses)
                        {
                            <li class="list-group-item">
                                @address.Street, @address.City, @address.State, @address.PostalCode, @address.Country
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No addresses available.</p>
                }

                <!-- Add Address Button -->
                <a class="btn btn-primary" asp-action="AddAddress" asp-controller="User" asp-route-id="@Model.Profile.UserId">Add Address</a>

                <!-- Edit Button -->
                <a class="btn btn-warning" asp-action="EditProfile" asp-controller="User" asp-route-id="@Model.Profile.UserId">Edit</a>

                <!-- Delete Button -->
                <form asp-controller="User" asp-action="DeleteProfile" asp-route-id="@Model.Profile.UserId" method="post" class="mt-3">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete your profile?')">Delete Profile</button>
                </form>
            </div>

            <!-- Right: Detailed Info -->
            <div class="col-md-8">
                <h4 class="mb-3">User Details</h4>
                <ul class="list-group mb-3">
                    <li class="list-group-item"><strong>Preferences:</strong> @Model.CustomerProfile?.Preferences</li>
                    <li class="list-group-item"><strong>Created On:</strong> @Model.Profile.CreatedAt.ToShortDateString()</li>
                    <li class="list-group-item"><strong>Last Updated:</strong> @Model.Profile.UpdatedAt.ToShortDateString()</li>
                </ul>

                <!-- Feedback Section -->
                <h4 class="mb-3">Feedback</h4>
                @if (Model.Feedbacks?.Any() ?? false)
                {
                    <ul class="list-group">
                        @foreach (var feedback in Model.Feedbacks)
                        {
                            <li class="list-group-item">
                                <strong>@feedback.Rating/5</strong> - @feedback.Feedback
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No feedback available.</p>
                }

                <!-- Payments Section -->
                <h4 class="mb-3">Payment History</h4>
                @if (Model.Payments?.Any() ?? false)
                {
                    <ul class="list-group">
                        @foreach (var payment in Model.Payments)
                        {
                            <li class="list-group-item">
                                <strong>@payment.Amount.ToString("C")</strong> - @payment.PaymentDate.ToShortDateString()
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No payment records found.</p>
                }
            </div>
        </div>
    </div>
</div>
*@


@model Handyman.Data.Entities.UserProfileViewModel

<div class="container py-5">
    <div class="card shadow-lg p-4">
        <div class="row">
            <!-- Left: Profile Info -->
            <div class="col-md-4 text-center">
                <div class="mb-3">
                    @if (Model.Profile.Id > 0)
                    {
                        <img src="@Url.Action("GetProfileImage", "User", new { id = Model.Profile.Id })" alt="Profile Image" class="img-thumbnail" width="150" height="150" />
                    }
                    else
                    {
                        <img src="~/images/defaultpic.jpg" alt="Profile Image" class="img-thumbnail" width="150" height="150" />
                    }
                </div>
                <h4>@Model.Profile.FullName</h4>
                <p class="text-muted">@Model.Profile.Email</p>
                <p><strong>Role:</strong> @Model.Profile.Role</p>
                <p><strong>Phone:</strong> @Model.Profile.PhoneNumber</p>

                <!-- Addresses Section -->
                <h4 class="mb-3">Addresses</h4>
                @if (Model.Addresses != null && Model.Addresses.Any())
                {
                    <ul class="list-group mb-3">
                        @foreach (var address in Model.Addresses)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                @address.Street, @address.City, @address.State, @address.PostalCode, @address.Country
                                <div>
                                    <a class="btn btn-sm btn-warning" asp-action="AddEditAddress" asp-controller="User" asp-route-id="@address.userId">Edit</a>
                                    <form asp-controller="User" asp-action="DeleteAddress" asp-route-id="@address.Id" method="post" style="display:inline;">
                                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this address?')">Delete</button>
                                    </form>
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No addresses available.</p>
                }

                <!-- Add Address Button -->
                <a class="btn btn-primary" asp-action="AddEditAddress" asp-controller="User" asp-route-id="@Model.Profile.UserId">Add Address</a>

                <!-- Edit Button -->
                <a class="btn btn-warning" asp-action="EditProfile" asp-controller="User" asp-route-id="@Model.Profile.UserId">Edit</a>

                <!-- Delete Button -->
                <form asp-controller="User" asp-action="DeleteProfile" asp-route-id="@Model.Profile.UserId" method="post" class="mt-3">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete your profile?')">Delete Profile</button>
                </form>
            </div>

            <!-- Right: Detailed Info -->
            <div class="col-md-8">
                <h4 class="mb-3">User Details</h4>
                <ul class="list-group mb-3">
                    <li class="list-group-item"><strong>Preferences:</strong> @Model.CustomerProfile?.Preferences</li>
                    <li class="list-group-item"><strong>Created On:</strong> @Model.Profile.CreatedAt.ToShortDateString()</li>
                    <li class="list-group-item"><strong>Last Updated:</strong> @Model.Profile.UpdatedAt.ToShortDateString()</li>
                </ul>

                <!-- Feedback Section -->
                <h4 class="mb-3">Feedback</h4>
                @if (Model.Feedbacks?.Any() ?? false)
                {
                    <ul class="list-group">
                        @foreach (var feedback in Model.Feedbacks)
                        {
                            <li class="list-group-item">
                                <strong>@feedback.Rating/5</strong> - @feedback.Feedback
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No feedback available.</p>
                }

                <!-- Payments Section -->
                <h4 class="mb-3">Payment History</h4>
                @if (Model.Payments?.Any() ?? false)
                {
                    <ul class="list-group">
                        @foreach (var payment in Model.Payments)
                        {
                            <li class="list-group-item">
                                <strong>@payment.Amount.ToString("C")</strong> - @payment.PaymentDate.ToShortDateString()
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No payment records found.</p>
                }
            </div>
        </div>
    </div>
</div>
